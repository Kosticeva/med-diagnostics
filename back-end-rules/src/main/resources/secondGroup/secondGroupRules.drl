//created on: Jun 4, 2018
package secondGroup

//list any import classes here.
import drools.model.Chart;
import drools.model.Examination;
import drools.model.Symptom;
import drools.model.Disease;
import java.util.Date;


//declare any global variables here


rule "Hipertenzija"
	agenda-group "diagnose"
    when
    	$chart: Chart($exams: examinations)
    	$exam: Examination(disease == null) from $exams
        $cc: Number(intValue >= 10) from accumulate (
        	$exam1: Examination(
        		this meets[180d] $exam,
        		$symptoms: symptoms
        	) from $exams and
        	Symptom(name == "Povisen krvni pritisak") from $symptoms,
        	count(1)
        )
    then
       Disease d = new Disease(4, "Hipertenzija", null);
    	$exam.setDisease(d);
    	update($chart);
		System.out.println("U pitanju je hipertenzija ");
end

rule "Dijabetes"
    agenda-group "diagnose"
    when
       	$chart: Chart($exams: examinations)
    	$exam: Examination(disease == null, $symptoms: symptoms) from $exams
    	$count: Number(intValue == 4) from accumulate (
    		Symptom(name=="Cesto uriniranje" || name=="Gubitak telesne tezine"
    			|| name=="Zamor" || name=="Mucnina i povracanje") from $symptoms,
    		count(1)
    	)
    then
        Disease d = new Disease(5, "Dijabetes", null);
    	$exam.setDisease(d);
    	update($chart);
		System.out.println("U pitanju je dijabetes");

end
